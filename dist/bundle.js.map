{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../phocus/dist/index.js","webpack:///../phocus/dist/action-context/action-context.js","webpack:///../phocus/dist/hotkey/hotkey.js","webpack:///../phocus/dist/constrain-focus/constrain-focus.js","webpack:///../phocus/dist/dom-manipulation/add-trigger.js","webpack:///../phocus/dist/dom-manipulation/mouseover-focusable.js","webpack:///./index.js","webpack:///../phocus/dist/dom-manipulation/start-phocus.js","webpack:///../phocus/dist/dom-manipulation/dispatch.js","webpack:///../phocus/dist/dom-manipulation/focus-in-context.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","action_context_1","Action","ActionContextService","hotkey_1","Hotkey","constrain_focus_1","ConstrainFocusService","start_phocus_1","startPhocus","stopPhocus","focus_in_context_1","focusInContext","ActionInContext","action","contextName","argument","element","service","this","configurable","act","e","actOn","context","contexts","description","remappedKey","shortDocumentation","searchTerms","defaultKeys","hidden","label","keys","ActionContextServiceClass","contextStack","defaultContextStack","remappingDirty","onRemappingCallback","remapping","localStorage","setItem","JSON","stringify","addContext","console","warn","addDefaultContext","push","removeDefaultContext","filter","clear","getContextStack","elt","stack","parentElement","dataset","phocusContextName","unshift","phocusContextArgument","setContext","remapAction","newMapping","currentRemapping","unremapAction","unmapAction","_this","ll","map","actions","actionName","mapping","concat","apply","x","restoreRemapping","parse","getItem","onRemapping","callback","actionsInContexts","currentStackWithDefaults","accum","length","contextEntry","contextFor","error","actionsFromContext","opaque","actionsByName","actionForKeypress","availableActions","find","actionInContext","indexOf","handleKeypress","event","canonicalKeyFromEvent","keyAction","preventDefault","stopPropagation","actionForName","triggerAction","3","6","8","9","12","13","16","17","18","19","20","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","48","49","50","51","52","53","54","55","56","57","91","93","144","145","181","182","183","186","187","188","189","190","191","192","219","220","221","222","224","225","246","247","248","249","250","251","letter","String","fromCharCode","toLowerCase","toUpperCase","HotkeyClass","displayMap","Alt","Meta","OS","Shift","Control","modifiers","isMacLike","navigator","platform","match","keyName","modifierKeyNameForPlatform","displayKey","canonicalKey","parts","split","pop","join","keyCode","getModifierState","ConstrainFocus","handler","noConstraints","root","currentRoot","relatedTarget","contains","refocus","target","start","document","addEventListener","stop","removeEventListener","focus","focusable","querySelector","constraint","pushConstraint","previousFocus","activeElement","rootE","popConstraint","shift","HTMLElement","onClick","currentTarget","phocusAction","disabled","triggerableTags","addTrigger","tagName","getAttribute","info","setAttribute","oldContext","phocusDoNotLabel","title","test","innerHTML","phocusAutolabel","removeTrigger","moving","timeout","mouseoverFocus","setMoving","clearTimeout","setTimeout","makeMouseoverFocusable","undefined","tabIndex","removeMouseoverFocusable","todoList","add","log","_","input","getElementById","makeTodoItem","renderList","id","status","classList","remove","finish","delete","prev","getPreviousItem","next","getNextItem","previous","window","body","maxId","it","toString","fid","oldFocus","phocusId","list","sort","renderItem","item","ids","current","findIndex","observer","dispatch_1","add_trigger_1","mouseover_focusable_1","keydown","focusedElement","focused","observe","mutations","forEach","addedNodes","dispatch","type","MutationObserver","childList","subtree","attributes","attributeFilter","undispatch","disconnect","phocusOnMouseover","children","querySelectorAll","Array","from","parent_1","getContextParent","parent"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"./action-context/action-context\");\nexports.Action = action_context_1.Action;\nexports.ActionContextService = action_context_1.ActionContextService;\nvar hotkey_1 = require(\"./hotkey/hotkey\");\nexports.Hotkey = hotkey_1.Hotkey;\nvar constrain_focus_1 = require(\"./constrain-focus/constrain-focus\");\nexports.ConstrainFocusService = constrain_focus_1.ConstrainFocusService;\nvar start_phocus_1 = require(\"./dom-manipulation/start-phocus\");\nexports.startPhocus = start_phocus_1.startPhocus;\nexports.stopPhocus = start_phocus_1.stopPhocus;\nvar focus_in_context_1 = require(\"./dom-manipulation/focus-in-context\");\nexports.focusInContext = focus_in_context_1.focusInContext;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar hotkey_1 = require(\"../hotkey/hotkey\");\n// Actions have one free argument; when a context is pushed onto the stack, that\n// argument is stored along with it. An ActionInContext closes over the argument\n// so that the action can be called anywhere\nvar ActionInContext = /** @class */ (function () {\n    function ActionInContext(action, contextName, argument, element, service) {\n        this.action = action;\n        this.contextName = contextName;\n        this.argument = argument;\n        this.element = element;\n        this.service = service;\n    }\n    Object.defineProperty(ActionInContext.prototype, \"hasArgument\", {\n        get: function () {\n            return !!this.argument;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionInContext.prototype.act = function (e) {\n        return this.action.actOn(this.argument, this.element, e);\n    };\n    ActionInContext.prototype.context = function () {\n        this.service.contexts[this.contextName];\n    };\n    return ActionInContext;\n}());\nexports.ActionInContext = ActionInContext;\n// An action is anything you can do in a given context. It can be mapped to a\n// keyboard shortcut.\nvar Action = /** @class */ (function () {\n    function Action(description) {\n        this.remappedKey = null;\n        this.remappedKey = null;\n        this.name = description.name;\n        this.shortDocumentation = description.shortDocumentation;\n        this.searchTerms = description.searchTerms || [];\n        this.actOn = description.actOn;\n        this.defaultKeys = description.defaultKeys;\n        this.hidden = description.hidden || false;\n    }\n    Object.defineProperty(Action.prototype, \"keys\", {\n        get: function () {\n            if (this.remappedKey)\n                return [this.remappedKey];\n            return this.defaultKeys;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Action.prototype.label = function () {\n        var key = this.keys[0];\n        if (key) {\n            return this.name + \" (\" + key + \")\";\n        }\n        else {\n            return this.name;\n        }\n    };\n    return Action;\n}());\nexports.Action = Action;\nvar ActionContextServiceClass = /** @class */ (function () {\n    function ActionContextServiceClass() {\n        this.contextStack = [];\n        this.defaultContextStack = [];\n        this.contexts = {};\n        this.remappingDirty = false;\n        // By default, store remappings in localStorage.\n        this.onRemappingCallback = function (remapping) {\n            localStorage.setItem(\"phocus-remapping\", JSON.stringify(remapping));\n        };\n    }\n    ActionContextServiceClass.prototype.addContext = function (name, context) {\n        if (this.contexts[name]) {\n            console.warn(\"Replacing existing context blueprint: \", name);\n        }\n        this.contexts[name] = context;\n    };\n    ActionContextServiceClass.prototype.addDefaultContext = function (name, argument, element) {\n        this.defaultContextStack.push({\n            context: name,\n            argument: argument,\n            element: element\n        });\n    };\n    ActionContextServiceClass.prototype.removeDefaultContext = function (name, argument, element) {\n        this.defaultContextStack = this.defaultContextStack.filter(function (c) {\n            return !(c.context === name &&\n                c.argument === argument &&\n                c.element === element);\n        });\n    };\n    ActionContextServiceClass.prototype.clear = function () {\n        this.defaultContextStack = [];\n        this.contextStack = [];\n        this.contexts = {};\n        this.remappingDirty = false;\n    };\n    ActionContextServiceClass.prototype.getContextStack = function (elt) {\n        if (!elt)\n            return [];\n        var stack = this.getContextStack(elt.parentElement);\n        if (elt.dataset.phocusContextName) {\n            stack.unshift({\n                context: elt.dataset.phocusContextName,\n                argument: elt.dataset.phocusContextArgument,\n                element: elt\n            });\n        }\n        return stack;\n    };\n    ActionContextServiceClass.prototype.setContext = function (elt) {\n        this.contextStack = this.getContextStack(elt);\n    };\n    /** Give a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.remapAction = function (action, newMapping) {\n        action.remappedKey = newMapping;\n        this.onRemappingCallback(this.currentRemapping);\n    };\n    /** Remove a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.unremapAction = function (action) {\n        action.remappedKey = null;\n        this.onRemappingCallback(this.currentRemapping);\n    };\n    /** Remove a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.unmapAction = function (action) {\n        action.remappedKey = \"None\";\n        this.onRemappingCallback(this.currentRemapping);\n    };\n    Object.defineProperty(ActionContextServiceClass.prototype, \"currentRemapping\", {\n        /** Collect all user-remapped actions so that they can be saved */\n        get: function () {\n            var _this = this;\n            var ll = Object.keys(this.contexts).map(function (contextName) {\n                var context = _this.contexts[contextName];\n                if (!context)\n                    return; // TODO assertion, probs\n                return Object.keys(context.actions).map(function (actionName) {\n                    var action = context.actions[actionName];\n                    if (!action.remappedKey)\n                        return;\n                    return {\n                        action: actionName,\n                        context: contextName,\n                        mapping: action.remappedKey\n                    };\n                });\n            });\n            // This is a hot mess of typing. First real \"ts is in my way\" moment. We've\n            // got an array of maybe-remappings, gotta flatten it and remove any\n            // undefineds:\n            return [].concat\n                .apply([], ll)\n                .filter(function (x) { return x; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionContextServiceClass.prototype.restoreRemapping = function (remapping) {\n        var _this = this;\n        if (!remapping) {\n            remapping = JSON.parse(localStorage.getItem(\"phocus-remapping\") || \"null\");\n            if (!remapping)\n                return;\n        }\n        remapping.map(function (m) {\n            var context = _this.contexts[m.context];\n            var action = context.actions[m.action];\n            _this.remapAction(action, m.mapping);\n        });\n    };\n    ActionContextServiceClass.prototype.onRemapping = function (callback) {\n        this.onRemappingCallback = callback;\n    };\n    Object.defineProperty(ActionContextServiceClass.prototype, \"currentStackWithDefaults\", {\n        get: function () {\n            return [].concat(this.contextStack, this.defaultContextStack);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActionContextServiceClass.prototype, \"availableActions\", {\n        /** Collect actions, along with the appropriate argument, from all\n         * contexts in the active stack, smallest context first */\n        get: function () {\n            return this.actionsInContexts(this.currentStackWithDefaults);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionContextServiceClass.prototype.actionsInContexts = function (contextStack) {\n        var accum = [];\n        for (var i = 0; i < contextStack.length; i++) {\n            var contextEntry = contextStack[i];\n            var context = this.contextFor(contextEntry);\n            if (!context) {\n                console.error(\"Unknown action context:\", contextEntry.context);\n                return;\n            }\n            var actions = this.actionsFromContext(contextEntry);\n            accum = accum.concat(actions);\n            if (context.opaque) {\n                break;\n            }\n        }\n        return accum;\n    };\n    ActionContextServiceClass.prototype.actionsFromContext = function (contextEntry) {\n        var _this = this;\n        var context = this.contextFor(contextEntry);\n        var actionsByName = context.actions;\n        return Object.keys(actionsByName).map(function (name) {\n            return new ActionInContext(actionsByName[name], contextEntry.context, contextEntry.argument, contextEntry.element, _this);\n        });\n    };\n    ActionContextServiceClass.prototype.contextFor = function (contextEntry) {\n        return this.contexts[contextEntry.context];\n    };\n    ActionContextServiceClass.prototype.actionForKeypress = function (key) {\n        var availableActions = this.availableActions;\n        if (!availableActions)\n            return;\n        return availableActions.find(function (actionInContext) {\n            var action = actionInContext.action;\n            return action.keys.indexOf(key) >= 0;\n        });\n    };\n    ActionContextServiceClass.prototype.handleKeypress = function (event) {\n        var key = hotkey_1.Hotkey.canonicalKeyFromEvent(event);\n        var keyAction = this.actionForKeypress(key);\n        if (keyAction) {\n            event.preventDefault();\n            event.stopPropagation();\n            keyAction.act(event);\n        }\n    };\n    ActionContextServiceClass.prototype.actionForName = function (name) {\n        var _this = this;\n        var contextEntry = this.currentStackWithDefaults.find(function (c) {\n            var context = _this.contextFor(c);\n            return context && name in context.actions;\n        });\n        if (!contextEntry)\n            return;\n        var context = this.contextFor(contextEntry);\n        return new ActionInContext(context.actions[name], contextEntry.context, contextEntry.argument, contextEntry.element, this);\n    };\n    ActionContextServiceClass.prototype.triggerAction = function (name, e) {\n        var action = this.actionForName(name);\n        if (!action) {\n            console.error(\"No action found for name \" + name + \".\", this.contextStack);\n            return;\n        }\n        action.act(e);\n    };\n    return ActionContextServiceClass;\n}());\nexports.ActionContextServiceClass = ActionContextServiceClass;\nexports.ActionContextService = new ActionContextServiceClass();\n//# sourceMappingURL=action-context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keys = {\n    3: [\"Cancel\", \"Cancel\"],\n    6: [\"Help\", \"Help\"],\n    8: [\"Backspace\", \"Backspace\"],\n    9: [\"Tab\", \"Tab\"],\n    12: [\"Clear\", \"Clear\"],\n    13: [\"Enter\", \"Enter\"],\n    16: [\"Shift\", \"Shift\"],\n    17: [\"Control\", \"Control\"],\n    18: [\"Alt\", \"Alt\"],\n    19: [\"Pause\", \"Pause\"],\n    20: [\"CapsLock\", \"CapsLock\"],\n    27: [\"Escape\", \"Escape\"],\n    28: [\"Convert\", \"Convert\"],\n    29: [\"NonConvert\", \"NonConvert\"],\n    30: [\"Accept\", \"Accept\"],\n    31: [\"ModeChange\", \"ModeChange\"],\n    32: [\" \", \" \"],\n    33: [\"PageUp\", \"PageUp\"],\n    34: [\"PageDown\", \"PageDown\"],\n    35: [\"End\", \"End\"],\n    36: [\"Home\", \"Home\"],\n    37: [\"ArrowLeft\", \"ArrowLeft\"],\n    38: [\"ArrowUp\", \"ArrowUp\"],\n    39: [\"ArrowRight\", \"ArrowRight\"],\n    40: [\"ArrowDown\", \"ArrowDown\"],\n    41: [\"Select\", \"Select\"],\n    42: [\"Print\", \"Print\"],\n    43: [\"Execute\", \"Execute\"],\n    44: [\"PrintScreen\", \"PrintScreen\"],\n    45: [\"Insert\", \"Insert\"],\n    46: [\"Delete\", \"Delete\"],\n    48: [\"0\", \")\"],\n    49: [\"1\", \"!\"],\n    50: [\"2\", \"@\"],\n    51: [\"3\", \"#\"],\n    52: [\"4\", \"$\"],\n    53: [\"5\", \"%\"],\n    54: [\"6\", \"^\"],\n    55: [\"7\", \"&\"],\n    56: [\"8\", \"*\"],\n    57: [\"9\", \"(\"],\n    91: [\"OS\", \"OS\"],\n    93: [\"ContextMenu\", \"ContextMenu\"],\n    144: [\"NumLock\", \"NumLock\"],\n    145: [\"ScrollLock\", \"ScrollLock\"],\n    181: [\"VolumeMute\", \"VolumeMute\"],\n    182: [\"VolumeDown\", \"VolumeDown\"],\n    183: [\"VolumeUp\", \"VolumeUp\"],\n    186: [\";\", \":\"],\n    187: [\"=\", \"+\"],\n    188: [\",\", \"<\"],\n    189: [\"-\", \"_\"],\n    190: [\".\", \">\"],\n    191: [\"/\", \"?\"],\n    192: [\"`\", \"~\"],\n    219: [\"[\", \"{\"],\n    220: [\"\\\\\", \"|\"],\n    221: [\"]\", \"}\"],\n    222: [\"'\", '\"'],\n    224: [\"Meta\", \"Meta\"],\n    225: [\"AltGraph\", \"AltGraph\"],\n    246: [\"Attn\", \"Attn\"],\n    247: [\"CrSel\", \"CrSel\"],\n    248: [\"ExSel\", \"ExSel\"],\n    249: [\"EraseEof\", \"EraseEof\"],\n    250: [\"Play\", \"Play\"],\n    251: [\"ZoomOut\", \"ZoomOut\"]\n};\nvar letter = \"\";\nfor (var i = 65; i < 91; i++) {\n    letter = String.fromCharCode(i);\n    keys[i] = [letter.toLowerCase(), letter.toUpperCase()];\n}\nvar HotkeyClass = /** @class */ (function () {\n    function HotkeyClass() {\n        // TODO change map for mac/PC\n        this.displayMap = {\n            Alt: \"Alt+\",\n            Meta: \"\\u2318+\",\n            OS: \"\\u229E+\",\n            Shift: \"\\u21E7\",\n            Control: \"Ctrl+\"\n        };\n        this.modifiers = [\"Control\", \"Alt\", \"Shift\", \"Meta\", \"OS\"];\n        this.isMacLike = !!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);\n    }\n    HotkeyClass.prototype.keyName = function (key) {\n        var keyString = {\n            \" \": \"Space\"\n        }[key];\n        return keyString || key;\n    };\n    HotkeyClass.prototype.modifierKeyNameForPlatform = function (key) {\n        return this.displayMap[key];\n    };\n    HotkeyClass.prototype.displayKey = function (canonicalKey) {\n        var _this = this;\n        var parts = canonicalKey.split(\"+\");\n        var key = parts.pop();\n        var modifiers = parts.map(function (key) {\n            return _this.modifierKeyNameForPlatform(key);\n        });\n        return modifiers.join(\"\") + key;\n    };\n    HotkeyClass.prototype.canonicalKeyFromEvent = function (e) {\n        var key = keys[e.keyCode][e.getModifierState(\"Shift\") ? 1 : 0];\n        if (this.modifiers.indexOf(key) >= 0) {\n            return \"\";\n        }\n        var modifiers = this.modifiers.map(function (key) {\n            return e.getModifierState(key) ? key + \"+\" : \"\";\n        });\n        return modifiers.join(\"\") + this.keyName(key);\n    };\n    return HotkeyClass;\n}());\nexports.HotkeyClass = HotkeyClass;\nexports.Hotkey = new HotkeyClass();\n//# sourceMappingURL=hotkey.js.map","\"use strict\";\n// From 'The Rule of Phocus':\n// 4. Some states only allow focus among a subset of all focusable elements (modals, menus)\n//     4.1. This subset is always contained in exactly one branch of the element tree\n//\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ConstrainFocus = /** @class */ (function () {\n    function ConstrainFocus() {\n        var _this = this;\n        this.stack = [];\n        this.handler = function (e) {\n            if (_this.noConstraints())\n                return;\n            var root = _this.currentRoot();\n            if (!root)\n                return;\n            if (!e.relatedTarget)\n                return;\n            if (!root.contains(e.relatedTarget)) {\n                _this.refocus(root, e.target);\n            }\n        };\n    }\n    ConstrainFocus.prototype.start = function () {\n        document.addEventListener(\"blur\", this.handler, true);\n    };\n    ConstrainFocus.prototype.stop = function () {\n        document.removeEventListener(\"blur\", this.handler, true);\n    };\n    ConstrainFocus.prototype.refocus = function (root, target) {\n        if (root.contains(target)) {\n            target.focus();\n        }\n        else {\n            var focusable = root.querySelector(\"button, input, textarea, a, [tabindex='0']\");\n            if (focusable) {\n                focusable.focus();\n            }\n            else {\n                root.focus();\n            }\n        }\n    };\n    ConstrainFocus.prototype.focusable = function (element) {\n        var root = this.currentRoot();\n        return this.noConstraints() || (root && root.contains(element));\n    };\n    ConstrainFocus.prototype.currentRoot = function () {\n        return this.stack[0] && this.stack[0].constraint();\n    };\n    ConstrainFocus.prototype.pushConstraint = function (root) {\n        this.stack.unshift({\n            constraint: root,\n            previousFocus: document.activeElement\n        });\n        var rootE = this.currentRoot();\n        var focus = document.activeElement;\n        if (!rootE || !focus)\n            return;\n        this.refocus(rootE, focus);\n    };\n    ConstrainFocus.prototype.popConstraint = function () {\n        var pop = this.stack.shift();\n        if (!pop || !pop.previousFocus || !(pop.previousFocus instanceof HTMLElement))\n            return;\n        pop.previousFocus.focus();\n    };\n    ConstrainFocus.prototype.noConstraints = function () {\n        return this.stack.length == 0;\n    };\n    return ConstrainFocus;\n}());\nexports.ConstrainFocus = ConstrainFocus;\nexports.ConstrainFocusService = new ConstrainFocus();\n//# sourceMappingURL=constrain-focus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"../action-context/action-context\");\nfunction onClick(e) {\n    if (!(e.currentTarget instanceof HTMLElement))\n        return;\n    if (!e.currentTarget.dataset.phocusAction)\n        return;\n    if (e.currentTarget.disabled)\n        return;\n    action_context_1.ActionContextService.setContext(e.currentTarget);\n    action_context_1.ActionContextService.triggerAction(e.currentTarget.dataset.phocusAction, e);\n}\nexports.triggerableTags = [\"button\", \"a\"];\nfunction addTrigger(elt) {\n    if (!elt.dataset.phocusAction)\n        return;\n    var action = elt.dataset.phocusAction;\n    if (exports.triggerableTags.indexOf(elt.tagName.toLowerCase()) < 0 &&\n        elt.getAttribute(\"role\") !== \"button\") {\n        console.error(elt.tagName + \" (assigned to trigger \" + action + \") is not an accessible tag. Use a <button> or an <a>.\");\n        console.info(\"Setting role to 'button' to compensate.\");\n        elt.setAttribute(\"role\", \"button\");\n    }\n    var oldContext = action_context_1.ActionContextService.contextStack; // this store and restore thing; do it with an internal stack stack?\n    try {\n        // Add button labels, including any keyboard shortcuts\n        action_context_1.ActionContextService.setContext(elt);\n        var actionInContext = action_context_1.ActionContextService.actionForName(action);\n        if (!actionInContext) {\n            console.error(\"No action found for name \" + action, action_context_1.ActionContextService.contextStack);\n            return;\n        }\n        if (!elt.dataset.phocusDoNotLabel) {\n            elt.title = actionInContext.action.label();\n            elt.setAttribute(\"aria-label\", actionInContext.action.label());\n        }\n        // Set text (if elt is empty)\n        if (/^\\s*$/.test(elt.innerHTML)) {\n            elt.innerHTML = actionInContext.action.name;\n        }\n        else if (elt.dataset.phocusAutolabel) {\n            var label = elt.querySelector(elt.dataset.phocusAutolabel);\n            if (label) {\n                label.innerHTML = actionInContext.action.name;\n            }\n            else {\n                console.warn(\"Asked to autolabel \" + elt.dataset.phocusAutolabel + \", but no such element exists inside \" + elt + \".\");\n            }\n        }\n        // Add click handler\n        elt.addEventListener(\"click\", onClick);\n    }\n    finally {\n        // Restore context previously in progress\n        action_context_1.ActionContextService.contextStack = oldContext;\n    }\n}\nexports.addTrigger = addTrigger;\nfunction removeTrigger(elt) {\n    elt.removeEventListener(\"click\", onClick);\n}\nexports.removeTrigger = removeTrigger;\n//# sourceMappingURL=add-trigger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar moving = false;\nvar timeout = null;\nfunction setMoving() {\n    moving = true;\n    if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n    }\n    timeout = setTimeout(function () {\n        moving = false;\n        timeout = null;\n    }, 250);\n}\nexports.setMoving = setMoving;\nfunction mouseoverFocus(e) {\n    if (!moving)\n        return;\n    e.target.focus();\n}\nfunction makeMouseoverFocusable(elt) {\n    if (elt.getAttribute(\"tabindex\") == undefined) {\n        elt.tabIndex = 0;\n    }\n    elt.addEventListener(\"mouseenter\", mouseoverFocus);\n}\nexports.makeMouseoverFocusable = makeMouseoverFocusable;\nfunction removeMouseoverFocusable(elt) {\n    elt.removeEventListener(\"mouseenter\", mouseoverFocus);\n}\nexports.removeMouseoverFocusable = removeMouseoverFocusable;\n//# sourceMappingURL=mouseover-focusable.js.map","import {\n  Action,\n  ActionContextService,\n  startPhocus,\n  focusInContext\n} from \"phocus\";\n\n/*\nYou should use a frontend framework! This tiny todo app uses Phocus all by\nitself so that you can see what Phocus can do; but you should NOT use Phocus by\nitself. Use it with React or Angular or something, OK?\n\nI'm logging to the console instead of interacting with a real API, but the\nprinciple's the same -- you've got the relevant id, so you can make the relevant\nrequest.\n\n*/\n\nvar todoList = {};\n\n// First, we'll set up some contexts. One for the whole list, one for the form,\n// and one that represents an individual todo item.\n\nActionContextService.addContext(\"todo-list\", {\n  actions: {\n    add: new Action({\n      name: \"Add Todo\",\n      defaultKeys: [\"Alt+n\"],\n      actOn: (e, elt) => {\n        console.log(\"OK\")\n        focusInContext(\"new-item-form\", elt);\n      }\n    })\n  }\n});\n\nActionContextService.addContext(\"todo-item-form\", {\n  actions: {\n    add: new Action({\n      name: \"Add Todo\",\n      defaultKeys: [\"Enter\"],\n      actOn: (_, elt) => {\n        // Get a new event \"from the API\"\n        const input = document.getElementById(\"new-item-form\");\n        makeTodoItem(input.value);\n        renderList();\n        input.value = \"\";\n        input.focus();\n      }\n    })\n  }\n});\n\nActionContextService.addContext(\"todo-item\", {\n  actions: {\n    start: new Action({\n      name: \"Start\",\n      defaultKeys: [\"s\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a start event to the API, if you had an API\n        console.log(`API: Start item ${id}`);\n        todoList[id].status = \"started\";\n        elt.classList.add(\"started\");\n        elt.classList.remove(\"todo\");\n      }\n    }),\n    finish: new Action({\n      name: \"Finish\",\n      defaultKeys: [\"f\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a finish event to the API, if you had an API\n        console.log(`API: Finish item ${id}`);\n        todoList[id].status = \"finished\";\n        elt.classList.add(\"finished\");\n        elt.classList.remove(\"started\");\n      }\n    }),\n    delete: new Action({\n      name: \"Delete\",\n      defaultKeys: [\"Backspace\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a delete event to the API, if you had an API\n        console.log(`Delete item ${id}`);\n\n        // Update focus\n        const prev = getPreviousItem(id);\n        const next = getNextItem(id);\n        if (prev) {\n          focusInContext(`todo-item-${prev.id}`, elt);\n        } else if (next) {\n          focusInContext(`todo-item-${next.id}`, elt);\n        } else {\n          focusInContext(\"new-item-form\", elt);\n        }\n\n        // Update UI\n        delete todoList[id];\n        renderList();\n      }\n    }),\n    next: new Action({\n      name: \"Next\",\n      defaultKeys: [\"ArrowDown\", \"j\"],\n      actOn: (id, elt) => {\n        const next = getNextItem(id);\n        if (next) focusInContext(`todo-item-${next.id}`, elt);\n      }\n    }),\n    previous: new Action({\n      name: \"previous\",\n      defaultKeys: [\"ArrowUp\", \"k\"],\n      actOn: (id, elt) => {\n        const prev = getPreviousItem(id);\n        if (prev) focusInContext(`todo-item-${prev.id}`, elt);\n      }\n    })\n  }\n});\n\nwindow.addEventListener(\"load\", () => {\n  renderList();\n  startPhocus(document.body);\n  document.querySelector(\"li\").focus();\n});\n\n// MODEL\n// In a real app this'd be connected to an API, and there'd be\n// multiple lists and all kinds of good stuff; this is not the best app in the\n// world; this is only a tribu^H^H^H^H^H demo.\n\nvar maxId = 1;\nfunction makeTodoItem(name) {\n  maxId++;\n  const it = {\n    id: maxId.toString(),\n    name: name,\n    status: \"todo\"\n  };\n  todoList[maxId.toString()] = it;\n  return it;\n}\n\nmakeTodoItem(\"Make trouble\");\nmakeTodoItem(\"Walk the lobster\");\nmakeTodoItem(\"Sing the body electric\");\n\n// RENDERING\n// You should use a frontend framework for this sort of thing, I'm simplifying\n// so you can see what Phocus is doing without the complexity of a framework.\n\nfunction renderList(fid) {\n  const oldFocus = document.activeElement.dataset.phocusId;\n  const list = document.getElementById(\"list\");\n  list.innerHTML = Object.keys(todoList)\n    .sort()\n    .map(id => renderItem(todoList[id]))\n    .join(\"\");\n\n  // This nonsense would not be necessary if using a real frontend framework.\n  // This business of 'rerender it all every change' is not particularly\n  // sustainable, just simple.\n  setTimeout(() => {\n    if (oldFocus) {\n      focusInContext(oldFocus, list);\n    } else if (fid) {\n      focusInContext(`todo-item-${fid}`, list);\n    } else {\n      ActionContextService.setContext(list);\n    }\n  }, 100);\n}\n\nfunction getNextItem(id) {\n  const ids = Object.keys(todoList).sort();\n  const current = ids.findIndex(i => i === id);\n  if (ids.length > current + 1) return todoList[ids[current + 1]];\n}\n\nfunction getPreviousItem(id) {\n  const ids = Object.keys(todoList).sort();\n  const current = ids.findIndex(i => i === id);\n  if (current > 0) return todoList[ids[current - 1]];\n}\n\nfunction renderItem(item) {\n  return `<li\n    tabindex=\"0\"\n    data-phocus-id=\"todo-item-${item.id}\"\n    data-phocus-context-name=\"todo-item\"\n    data-phocus-context-argument=\"${item.id}\"\n    data-phocus-on-mouseover=\"true\"\n    class=\"${item.status}\">\n      <span>${item.name}</span>\n      <div class=\"buttons\">\n        <button data-phocus-action=\"start\"></button>\n        <button data-phocus-action=\"finish\"></button>\n        <button data-phocus-action=\"delete\">&times;</button>\n      </div>\n    </li>`;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"../action-context/action-context\");\nvar dispatch_1 = require(\"./dispatch\");\nvar add_trigger_1 = require(\"./add-trigger\");\nvar constrain_focus_1 = require(\"../constrain-focus/constrain-focus\");\nvar mouseover_focusable_1 = require(\"./mouseover-focusable\");\nfunction setFocusedContext() {\n    var focused = document.activeElement;\n    if (!focused)\n        return;\n    var focusedElement;\n    if (!(focused instanceof HTMLElement) && focused.parentElement) {\n        focusedElement = focused.parentElement;\n    }\n    else {\n        focusedElement = focused;\n    }\n    if (!focusedElement)\n        return;\n    action_context_1.ActionContextService.setContext(focusedElement);\n}\nfunction keydown(e) {\n    setFocusedContext();\n    action_context_1.ActionContextService.handleKeypress(e);\n}\nfunction observe(mutations) {\n    mutations.forEach(function (m) {\n        m.addedNodes.forEach(function (n) {\n            if (!(n instanceof HTMLElement))\n                return;\n            dispatch_1.dispatch(n);\n        });\n        if (m.type == \"attributes\" && m.target instanceof HTMLElement) {\n            if (m.target.dataset.phocusAction) {\n                add_trigger_1.addTrigger(m.target);\n            }\n            else {\n                add_trigger_1.removeTrigger(m.target);\n            }\n        }\n    });\n}\nvar observer;\nfunction startPhocus(elt) {\n    dispatch_1.dispatch(elt);\n    document.addEventListener(\"keydown\", keydown);\n    document.addEventListener(\"mousemove\", mouseover_focusable_1.setMoving);\n    observer = new MutationObserver(observe);\n    observer.observe(elt, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"data-phocus-action\", \"data-phocus-on-mouseover\"]\n    });\n    constrain_focus_1.ConstrainFocusService.start();\n}\nexports.startPhocus = startPhocus;\nfunction stopPhocus(elt) {\n    dispatch_1.undispatch(elt);\n    document.removeEventListener(\"keydown\", keydown);\n    document.removeEventListener(\"mousemove\", mouseover_focusable_1.setMoving);\n    observer.disconnect();\n    constrain_focus_1.ConstrainFocusService.stop();\n}\nexports.stopPhocus = stopPhocus;\n//# sourceMappingURL=start-phocus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar add_trigger_1 = require(\"./add-trigger\");\nvar mouseover_focusable_1 = require(\"./mouseover-focusable\");\nfunction dispatch(elt) {\n    if (elt.dataset.phocusAction) {\n        add_trigger_1.addTrigger(elt);\n    }\n    if (elt.dataset.phocusOnMouseover) {\n        mouseover_focusable_1.makeMouseoverFocusable(elt);\n    }\n    var children = elt.querySelectorAll(\"[data-phocus-action]:not([data-phocus-action=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        add_trigger_1.addTrigger(e);\n    });\n    children = elt.querySelectorAll(\"[data-phocus-on-mouseover]:not([data-phocus-on-mouseover=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        mouseover_focusable_1.makeMouseoverFocusable(e);\n    });\n}\nexports.dispatch = dispatch;\nfunction undispatch(elt) {\n    if (elt.dataset.phocusAction) {\n        add_trigger_1.removeTrigger(elt);\n    }\n    if (elt.dataset.phocusOnMouseover) {\n        mouseover_focusable_1.removeMouseoverFocusable(elt);\n    }\n    var children = elt.querySelectorAll(\"[data-phocus-action]:not([data-phocus-action=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        add_trigger_1.removeTrigger(e);\n    });\n    children = elt.querySelectorAll(\"[data-phocus-on-mouseover]:not([data-phocus-on-mouseover=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        mouseover_focusable_1.removeMouseoverFocusable(e);\n    });\n}\nexports.undispatch = undispatch;\n//# sourceMappingURL=dispatch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getContextParent(elt) {\n    var parent = elt.parentElement;\n    if (!parent)\n        return null;\n    if (parent.dataset.phocusContextName)\n        return parent;\n    return getContextParent(parent);\n}\n// Allows elements with the same phocus-id to appear on the page, but asking to\n// focus on one will always result in focusing on the one in the nearest\n// ancestor context.\nfunction focusInContext(phocusId, elt) {\n    var current = elt || document.activeElement;\n    var find = current.querySelector(\"[data-phocus-id=\\\"\" + phocusId + \"\\\"]\");\n    if (find) {\n        find.focus();\n    }\n    else {\n        var parent_1 = getContextParent(current);\n        if (parent_1) {\n            focusInContext(phocusId, parent_1);\n        }\n        else {\n            console.error(\"No element found to focus with phocus-id \" + phocusId);\n        }\n    }\n}\nexports.focusInContext = focusInContext;\n//# sourceMappingURL=focus-in-context.js.map"],"sourceRoot":""}