{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/phocus/dist/index.js","webpack:///./node_modules/phocus/dist/action-context/action-context.js","webpack:///./node_modules/phocus/dist/hotkey/hotkey.js","webpack:///./node_modules/phocus/dist/constrain-focus/constrain-focus.js","webpack:///./node_modules/phocus/dist/dom-manipulation/add-trigger.js","webpack:///./index.js","webpack:///./node_modules/phocus/dist/dom-manipulation/start-phocus.js","webpack:///./node_modules/phocus/dist/dom-manipulation/dispatch.js","webpack:///./node_modules/phocus/dist/dom-manipulation/mouseover-focusable.js","webpack:///./node_modules/phocus/dist/dom-manipulation/focus-in-context.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","action_context_1","Action","ActionContextService","hotkey_1","Hotkey","constrain_focus_1","ConstrainFocusService","start_phocus_1","startPhocus","focus_in_context_1","focusInContext","ActionInContext","action","contextName","argument","element","service","this","configurable","act","e","actOn","context","contexts","description","remappedKey","shortDocumentation","searchTerms","defaultKeys","hidden","label","keys","ActionContextServiceClass","remappingDirty","contextStack","addContext","console","warn","clear","getContextStack","elt","stack","parentElement","dataset","phocusContextName","unshift","phocusContextArgument","setContext","remapAction","newMapping","unremapAction","unmapAction","_this","ll","map","actions","actionName","mapping","concat","apply","filter","x","restoreRemapping","remapping","actionsInContexts","accum","length","contextEntry","contextFor","error","actionsFromContext","opaque","actionsByName","actionForKeypress","availableActions","find","actionInContext","indexOf","handleKeypress","event","canonicalKeyFromEvent","keyAction","preventDefault","stopPropagation","actionForName","triggerAction","3","6","8","9","12","13","16","17","18","19","20","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","48","49","50","51","52","53","54","55","56","57","91","93","144","145","181","182","183","186","187","188","189","190","191","192","219","220","221","222","224","225","246","247","248","249","250","251","letter","String","fromCharCode","toLowerCase","toUpperCase","HotkeyClass","displayMap","Alt","Meta","OS","Shift","Control","modifiers","isMacLike","navigator","platform","match","keyName"," ","modifierKeyNameForPlatform","displayKey","canonicalKey","parts","split","pop","join","keyCode","getModifierState","ConstrainFocus","handler","noConstraints","root","currentRoot","relatedTarget","contains","target","focus","querySelector","start","document","addEventListener","stop","removeEventListener","focusable","pushConstraint","popConstraint","shift","onClick","HTMLElement","phocusAction","disabled","triggerableTags","addTrigger","tagName","info","setAttribute","oldContext","title","test","innerHTML","removeTrigger","__webpack_exports__","phocus__WEBPACK_IMPORTED_MODULE_0__","todoList","add","_","input","getElementById","makeTodoItem","renderList","id","log","status","finish","delete","prev","getPreviousItem","next","getNextItem","previous","window","body","maxId","it","toString","fid","oldFocus","activeElement","phocusId","list","sort","item","renderItem","ids","current","findIndex","observer","dispatch_1","add_trigger_1","keydown","focusedElement","focused","setFocusedContext","observe","mutations","forEach","addedNodes","dispatch","type","MutationObserver","childList","subtree","attributes","attributeFilter","debug","stopPhocus","undispatch","disconnect","mouseover_focusable_1","phocusOnMouseover","makeMouseoverFocusable","children","querySelectorAll","Array","from","removeMouseoverFocusable","mouseoverFocus","undefined","getAttribute","tabIndex","parent","getContextParent"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,kCCjFArB,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAAAe,EAAuBpC,EAAQ,GAC/BE,EAAAmC,OAAAD,EAAAC,OACAnC,EAAAoC,qBAAAF,EAAAE,qBACA,IAAAC,EAAevC,EAAQ,GACvBE,EAAAsC,OAAAD,EAAAC,OACA,IAAAC,EAAwBzC,EAAQ,GAChCE,EAAAwC,sBAAAD,EAAAC,sBACA,IAAAC,EAAqB3C,EAAQ,GAC7BE,EAAA0C,YAAAD,EAAAC,YACA,IAAAC,EAAyB7C,EAAQ,GACjCE,EAAA4C,eAAAD,EAAAC,6CCXAhC,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAAAkB,EAAevC,EAAQ,GAIvB+C,EAAA,WACA,SAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACAC,KAAAL,SACAK,KAAAJ,cACAI,KAAAH,WACAG,KAAAF,UACAE,KAAAD,UAeA,OAbAtC,OAAAC,eAAAgC,EAAAf,UAAA,eACAf,IAAA,WACA,QAAAoC,KAAAH,UAEAlC,YAAA,EACAsC,cAAA,IAEAP,EAAAf,UAAAuB,IAAA,SAAAC,GACA,OAAAH,KAAAL,OAAAS,MAAAJ,KAAAH,SAAAG,KAAAF,QAAAK,IAEAT,EAAAf,UAAA0B,QAAA,WACAL,KAAAD,QAAAO,SAAAN,KAAAJ,cAEAF,EArBA,GAuBA7C,EAAA6C,kBAGA,IAAAV,EAAA,WACA,SAAAA,EAAAuB,GACAP,KAAAQ,YAAA,KACAR,KAAAQ,YAAA,KACAR,KAAA1C,KAAAiD,EAAAjD,KACA0C,KAAAS,mBAAAF,EAAAE,mBACAT,KAAAU,YAAAH,EAAAG,YACAV,KAAAI,MAAAG,EAAAH,MACAJ,KAAAW,YAAAJ,EAAAI,YACAX,KAAAY,OAAAL,EAAAK,SAAA,EAoBA,OAlBAnD,OAAAC,eAAAsB,EAAAL,UAAA,QACAf,IAAA,WACA,OAAAoC,KAAAQ,aACAR,KAAAQ,aACAR,KAAAW,aAEAhD,YAAA,EACAsC,cAAA,IAEAjB,EAAAL,UAAAkC,MAAA,WACA,IAAAvC,EAAA0B,KAAAc,KAAA,GACA,OAAAxC,EACA0B,KAAA1C,KAAA,KAAAgB,EAAA,IAGA0B,KAAA1C,MAGA0B,EA7BA,GA+BAnC,EAAAmC,SACA,IAAA+B,EAAA,WACA,SAAAA,IACAf,KAAAM,YACAN,KAAAgB,gBAAA,EACAhB,KAAAiB,gBAmJA,OAjJAF,EAAApC,UAAAuC,WAAA,SAAA5D,EAAA+C,GACAL,KAAAM,SAAAhD,IACA6D,QAAAC,KAAA,yCAAA9D,GAEA0C,KAAAM,SAAAhD,GAAA+C,GAEAU,EAAApC,UAAA0C,MAAA,WACArB,KAAAiB,iBAEAF,EAAApC,UAAA2C,gBAAA,SAAAC,GACA,IAAAA,EACA,SACA,IAAAC,EAAAxB,KAAAsB,gBAAAC,EAAAE,eAQA,OAPAF,EAAAG,QAAAC,mBACAH,EAAAI,SACAvB,QAAAkB,EAAAG,QAAAC,kBACA9B,SAAA0B,EAAAG,QAAAG,sBACA/B,QAAAyB,IAGAC,GAEAT,EAAApC,UAAAmD,WAAA,SAAAP,GACAvB,KAAAiB,aAAAjB,KAAAsB,gBAAAC,IAGAR,EAAApC,UAAAoD,YAAA,SAAApC,EAAAqC,GACArC,EAAAa,YAAAwB,GAGAjB,EAAApC,UAAAsD,cAAA,SAAAtC,GACAA,EAAAa,YAAA,MAGAO,EAAApC,UAAAuD,YAAA,SAAAvC,GACAA,EAAAa,YAAA,QAEA/C,OAAAC,eAAAqD,EAAApC,UAAA,oBAEAf,IAAA,WACA,IAAAuE,EAAAnC,KACAoC,EAAA3E,OAAAqD,KAAAd,KAAAM,UAAA+B,IAAA,SAAAzC,GACA,IAAAS,EAAA8B,EAAA7B,SAAAV,GACA,GAAAS,EAEA,OAAA5C,OAAAqD,KAAAT,EAAAiC,SAAAD,IAAA,SAAAE,GACA,IAAA5C,EAAAU,EAAAiC,QAAAC,GACA,GAAA5C,EAAAa,YAEA,OACAb,OAAA4C,EACAlC,QAAAT,EACA4C,QAAA7C,EAAAa,iBAIA,SAAAiC,OAAAC,SAAAN,GAAAO,OAAA,SAAAC,GAAgE,OAAAA,KAEhEjF,YAAA,EACAsC,cAAA,IAEAc,EAAApC,UAAAkE,iBAAA,SAAAC,GACA,IAAAX,EAAAnC,KACA8C,GAEAA,EAAAT,IAAA,SAAAlF,GACA,IACAwC,EADAwC,EAAA7B,SAAAnD,EAAAkD,SACAiC,QAAAnF,EAAAwC,QACAwC,EAAAJ,YAAApC,EAAAxC,EAAAqF,YAGA/E,OAAAC,eAAAqD,EAAApC,UAAA,oBAGAf,IAAA,WACA,OAAAoC,KAAA+C,kBAAA/C,KAAAiB,eAEAtD,YAAA,EACAsC,cAAA,IAEAc,EAAApC,UAAAoE,kBAAA,SAAA9B,GAEA,IADA,IAAA+B,KACAjG,EAAA,EAAuBA,EAAAkE,EAAAgC,OAAyBlG,IAAA,CAChD,IAAAmG,EAAAjC,EAAAlE,GACAsD,EAAAL,KAAAmD,WAAAD,GACA,IAAA7C,EAEA,YADAc,QAAAiC,MAAA,0BAAAF,EAAA7C,SAGA,IAAAiC,EAAAtC,KAAAqD,mBAAAH,GAEA,GADAF,IAAAP,OAAAH,GACAjC,EAAAiD,OACA,MAGA,OAAAN,GAEAjC,EAAApC,UAAA0E,mBAAA,SAAAH,GACA,IAAAf,EAAAnC,KAEAuD,EADAvD,KAAAmD,WAAAD,GACAZ,QACA,OAAA7E,OAAAqD,KAAAyC,GAAAlB,IAAA,SAAA/E,GACA,WAAAoC,EAAA6D,EAAAjG,GAAA4F,EAAA7C,QAAA6C,EAAArD,SAAAqD,EAAApD,QAAAqC,MAGApB,EAAApC,UAAAwE,WAAA,SAAAD,GACA,OAAAlD,KAAAM,SAAA4C,EAAA7C,UAEAU,EAAApC,UAAA6E,kBAAA,SAAAlF,GACA,IAAAmF,EAAAzD,KAAAyD,iBACA,GAAAA,EAEA,OAAAA,EAAAC,KAAA,SAAAC,GAEA,OADAA,EAAAhE,OACAmB,KAAA8C,QAAAtF,IAAA,KAGAyC,EAAApC,UAAAkF,eAAA,SAAAC,GACA,IAAAxF,EAAAY,EAAAC,OAAA4E,sBAAAD,GACAE,EAAAhE,KAAAwD,kBAAAlF,GACA0F,IACAF,EAAAG,iBACAH,EAAAI,kBACAF,EAAA9D,IAAA4D,KAGA/C,EAAApC,UAAAwF,cAAA,SAAA7G,GACA,IAAA6E,EAAAnC,KACAkD,EAAAlD,KAAAiB,aAAAyC,KAAA,SAAAtG,GACA,IAAAiD,EAAA8B,EAAAgB,WAAA/F,GACA,OAAAiD,GAAA/C,KAAA+C,EAAAiC,UAEA,GAAAY,EAAA,CAEA,IAAA7C,EAAAL,KAAAmD,WAAAD,GACA,WAAAxD,EAAAW,EAAAiC,QAAAhF,GAAA4F,EAAA7C,QAAA6C,EAAArD,SAAAqD,EAAApD,QAAAE,QAEAe,EAAApC,UAAAyF,cAAA,SAAA9G,EAAA6C,GACA,IAAAR,EAAAK,KAAAmE,cAAA7G,GACAqC,EAIAA,EAAAO,IAAAC,GAHAgB,QAAAiC,MAAA,4BAAA9F,EAAA,IAAA0C,KAAAiB,eAKAF,EAvJA,GAyJAlE,EAAAkE,4BACAlE,EAAAoC,qBAAA,IAAA8B,gCCzNAtD,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAuE9C,IAtEA,IAAA8C,GACAuD,GAAA,mBACAC,GAAA,eACAC,GAAA,yBACAC,GAAA,aACAC,IAAA,iBACAC,IAAA,iBACAC,IAAA,iBACAC,IAAA,qBACAC,IAAA,aACAC,IAAA,iBACAC,IAAA,uBACAC,IAAA,mBACAC,IAAA,qBACAC,IAAA,2BACAC,IAAA,mBACAC,IAAA,2BACAC,IAAA,SACAC,IAAA,mBACAC,IAAA,uBACAC,IAAA,aACAC,IAAA,eACAC,IAAA,yBACAC,IAAA,qBACAC,IAAA,2BACAC,IAAA,yBACAC,IAAA,mBACAC,IAAA,iBACAC,IAAA,qBACAC,IAAA,6BACAC,IAAA,mBACAC,IAAA,mBACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,WACAC,IAAA,6BACAC,KAAA,qBACAC,KAAA,2BACAC,KAAA,2BACAC,KAAA,2BACAC,KAAA,uBACAC,KAAA,IAAY,KACZC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,UACAC,KAAA,SACAC,KAAA,SACAC,KAAA,eACAC,KAAA,uBACAC,KAAA,eACAC,KAAA,iBACAC,KAAA,iBACAC,KAAA,uBACAC,KAAA,eACAC,KAAA,sBAEAC,EAAA,GACAzL,EAAA,GAAgBA,EAAA,GAAQA,IACxByL,EAAAC,OAAAC,aAAA3L,GACA+D,EAAA/D,IAAAyL,EAAAG,cAAAH,EAAAI,eAEA,IAAAC,EAAA,WACA,SAAAA,IAEA7I,KAAA8I,YACAC,IAAA,OACAC,KAAA,KACAC,GAAA,KACAC,MAAA,IACAC,QAAA,SAEAnJ,KAAAoJ,WAAA,qCACApJ,KAAAqJ,YAAAC,UAAAC,SAAAC,MAAA,2BA8BA,OA5BAX,EAAAlK,UAAA8K,QAAA,SAAAnL,GAIA,OAFAoL,IAAA,SACSpL,IACTA,GAEAuK,EAAAlK,UAAAgL,2BAAA,SAAArL,GACA,OAAA0B,KAAA8I,WAAAxK,IAEAuK,EAAAlK,UAAAiL,WAAA,SAAAC,GACA,IAAA1H,EAAAnC,KACA8J,EAAAD,EAAAE,MAAA,KACAzL,EAAAwL,EAAAE,MAIA,OAHAF,EAAAzH,IAAA,SAAA/D,GACA,OAAA6D,EAAAwH,2BAAArL,KAEA2L,KAAA,IAAA3L,GAEAuK,EAAAlK,UAAAoF,sBAAA,SAAA5D,GACA,IAAA7B,EAAAwC,EAAAX,EAAA+J,SAAA/J,EAAAgK,iBAAA,cACA,OAAAnK,KAAAoJ,UAAAxF,QAAAtF,IAAA,EACA,GAEA0B,KAAAoJ,UAAA/G,IAAA,SAAA/D,GACA,OAAA6B,EAAAgK,iBAAA7L,KAAA,SAEA2L,KAAA,IAAAjK,KAAAyJ,QAAAnL,IAEAuK,EAzCA,GA2CAhM,EAAAgM,cACAhM,EAAAsC,OAAA,IAAA0J,gCCnHApL,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAAAoM,EAAA,WACA,SAAAA,IACA,IAAAjI,EAAAnC,KACAA,KAAAwB,SACAxB,KAAAqK,QAAA,SAAAlK,GACA,IAAAgC,EAAAmI,gBAAA,CAEA,IAAAC,EAAApI,EAAAqI,cACAD,GAEApK,EAAAsK,gBAEAF,EAAAG,SAAAvK,EAAAsK,iBACAF,EAAAG,SAAAvK,EAAAwK,QACAxK,EAAAwK,OAAAC,QAGAL,EAAAM,cAAA,kBAAAD,YA2BA,OAtBAR,EAAAzL,UAAAmM,MAAA,WACAC,SAAAC,iBAAA,OAAAhL,KAAAqK,SAAA,IAEAD,EAAAzL,UAAAsM,KAAA,WACAF,SAAAG,oBAAA,OAAAlL,KAAAqK,SAAA,IAEAD,EAAAzL,UAAAwM,UAAA,SAAArL,GACA,IAAAyK,EAAAvK,KAAAwK,cACA,OAAAxK,KAAAsK,iBAAAC,KAAAG,SAAA5K,IAEAsK,EAAAzL,UAAA6L,YAAA,WACA,OAAAxK,KAAAwB,MAAA,IAAAxB,KAAAwB,MAAA,MAEA4I,EAAAzL,UAAAyM,eAAA,SAAAb,GACAvK,KAAAwB,MAAAI,QAAA2I,IAEAH,EAAAzL,UAAA0M,cAAA,WACArL,KAAAwB,MAAA8J,SAEAlB,EAAAzL,UAAA2L,cAAA,WACA,UAAAtK,KAAAwB,MAAAyB,QAEAmH,EA5CA,GA8CAvN,EAAAuN,iBACAvN,EAAAwC,sBAAA,IAAA+K,gCCpDA3M,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAAAe,EAAuBpC,EAAQ,GAC/B,SAAA4O,EAAApL,GACAA,EAAAwK,kBAAAa,aAEArL,EAAAwK,OAAAjJ,QAAA+J,eAEAtL,EAAAwK,OAAAe,WAEA3M,EAAAE,qBAAA6C,WAAA3B,EAAAwK,QACA5L,EAAAE,qBAAAmF,cAAAjE,EAAAwK,OAAAjJ,QAAA+J,gBAEA5O,EAAA8O,iBAAA,cAiCA9O,EAAA+O,WAhCA,SAAArK,GACA,GAAAA,EAAAG,QAAA+J,aAAA,CAEA,IAAA9L,EAAA4B,EAAAG,QAAA+J,aACA5O,EAAA8O,gBAAA/H,QAAArC,EAAAsK,QAAAlD,eAAA,IACAxH,QAAAiC,MAAA7B,EAAAsK,QAAA,yBAAAlM,EAAA,yDACAwB,QAAA2K,KAAA,2CACAvK,EAAAwK,aAAA,kBAEA,IAAAC,EAAAjN,EAAAE,qBAAAgC,aACA,IAEAlC,EAAAE,qBAAA6C,WAAAP,GACA,IAAAoC,EAAA5E,EAAAE,qBAAAkF,cAAAxE,GACA,IAAAgE,EAEA,YADAxC,QAAAiC,MAAA,4BAAAzD,EAAAZ,EAAAE,qBAAAgC,cAGAM,EAAA0K,MAAAtI,EAAAhE,OAAAkB,QACAU,EAAAwK,aAAA,aAAApI,EAAAhE,OAAAkB,SAEA,QAAAqL,KAAA3K,EAAA4K,aACA5K,EAAA4K,UAAAxI,EAAAhE,OAAArC,MAGAiE,EAAAyJ,iBAAA,QAAAO,GAEA,QAEAxM,EAAAE,qBAAAgC,aAAA+K,KAOAnP,EAAAuP,cAHA,SAAA7K,GACAA,EAAA2J,oBAAA,QAAAK,kCChDA5O,EAAAkB,EAAAwO,GAAA,IAAAC,EAAA3P,EAAA,GAkBA4P,KAKAD,EAAA,qBAAoBpL,WAAA,aACpBoB,SACAkK,IAAA,IAAaF,EAAA,QACbhP,KAAA,WACAqD,aAAA,aACAP,MAAA,CAAAqM,EAAAlL,KACQ9D,OAAA6O,EAAA,eAAA7O,CAAc,gBAAA8D,SAMtB+K,EAAA,qBAAoBpL,WAAA,kBACpBoB,SACAkK,IAAA,IAAaF,EAAA,QACbhP,KAAA,WACAqD,aAAA,SACAP,MAAA,CAAAqM,EAAAlL,KAEA,MAAAmL,EAAA3B,SAAA4B,eAAA,iBACAC,EAAAF,EAAA1O,OACA6O,IACAH,EAAA1O,MAAA,GACA0O,EAAA9B,cAMA0B,EAAA,qBAAoBpL,WAAA,aACpBoB,SACAwI,MAAA,IAAewB,EAAA,QACfhP,KAAA,QACAqD,aAAA,KACAP,MAAA,CAAA0M,EAAAvL,KAEAJ,QAAA4L,uBAAuCD,KACvCP,EAAAO,GAAAE,OAAA,UACAH,EAAAC,MAGAG,OAAA,IAAgBX,EAAA,QAChBhP,KAAA,SACAqD,aAAA,KACAP,MAAA,CAAA0M,EAAAvL,KAEAJ,QAAA4L,wBAAwCD,KACxCP,EAAAO,GAAAE,OAAA,WACAH,EAAAC,MAGAI,OAAA,IAAgBZ,EAAA,QAChBhP,KAAA,SACAqD,aAAA,aACAP,MAAA,CAAA0M,EAAAvL,KAEAJ,QAAA4L,mBAAmCD,KAGnC,MAAAK,EAAAC,EAAAN,GACAO,EAAAC,EAAAR,GACAK,EACU1P,OAAA6O,EAAA,eAAA7O,cAA4B0P,EAAAL,KAAQvL,GACrC8L,EACC5P,OAAA6O,EAAA,eAAA7O,cAA4B4P,EAAAP,KAAQvL,GAEpC9D,OAAA6O,EAAA,eAAA7O,CAAc,gBAAA8D,UAIxBgL,EAAAO,GACAD,OAGAQ,KAAA,IAAcf,EAAA,QACdhP,KAAA,OACAqD,aAAA,iBACAP,MAAA,CAAA0M,EAAAvL,KACA,MAAA8L,EAAAC,EAAAR,GACAO,GAAkB5P,OAAA6O,EAAA,eAAA7O,cAA4B4P,EAAAP,KAAQvL,MAGtDgM,SAAA,IAAkBjB,EAAA,QAClBhP,KAAA,WACAqD,aAAA,eACAP,MAAA,CAAA0M,EAAAvL,KACA,MAAA4L,EAAAC,EAAAN,GACAK,GAAkB1P,OAAA6O,EAAA,eAAA7O,cAA4B0P,EAAAL,KAAQvL,SAMtDiM,OAAAxC,iBAAA,YACA6B,IACEpP,OAAA6O,EAAA,YAAA7O,CAAWsN,SAAA0C,MACb1C,SAAAF,cAAA,MAAAD,UAQA,IAAA8C,EAAA,EACA,SAAAd,EAAAtP,GAEA,MAAAqQ,GACAb,MAFAY,GAEAE,WACAtQ,OACA0P,OAAA,QAGA,OADAT,EAAAmB,EAAAE,YAAAD,EACAA,EAWA,SAAAd,EAAAgB,GACA,MAAAC,EAAA/C,SAAAgD,cAAArM,QAAAsM,SACAC,EAAAlD,SAAA4B,eAAA,QACAsB,EAAA9B,UAAA1O,OAAAqD,KAAAyL,GACA2B,OACA7L,IAAAyK,IAwBA,SAAAqB,GACA,8DAEgCA,EAAArB,oFAEIqB,EAAArB,wDAEvBqB,EAAAnB,mBACLmB,EAAA7Q,yOAhCR8Q,CAAA7B,EAAAO,KACA7C,KAAA,IAEA6D,EACIrQ,OAAA6O,EAAA,eAAA7O,CAAcqQ,EAAAG,GACfJ,EACCpQ,OAAA6O,EAAA,eAAA7O,cAA4BoQ,IAAII,GAEhC3B,EAAA,qBAAoBxK,WAAAmM,GAIxB,SAAAX,EAAAR,GACA,MAAAuB,EAAA5Q,OAAAqD,KAAAyL,GAAA2B,OACAI,EAAAD,EAAAE,UAAAxR,OAAA+P,GACA,GAAAuB,EAAApL,OAAAqL,EAAA,SAAA/B,EAAA8B,EAAAC,EAAA,IAGA,SAAAlB,EAAAN,GACA,MAAAuB,EAAA5Q,OAAAqD,KAAAyL,GAAA2B,OACAI,EAAAD,EAAAE,UAAAxR,OAAA+P,GACA,GAAAwB,EAAA,SAAA/B,EAAA8B,EAAAC,EAAA,IAlCA1B,EAAA,gBACAA,EAAA,oBACAA,EAAA,wDC5IAnP,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAwCAwQ,EAxCAzP,EAAuBpC,EAAQ,GAC/B8R,EAAiB9R,EAAQ,GACzB+R,EAAoB/R,EAAQ,GAC5ByC,EAAwBzC,EAAQ,GAgBhC,SAAAgS,EAAAxO,IAfA,WACA,IACAyO,EADAC,EAAA9D,SAAAgD,eAMAa,EAJAC,aAAArD,cAAAqD,EAAApN,cAIAoN,EAHAA,EAAApN,gBAOAmN,GAAA7D,SAAA0C,MAEA1O,EAAAE,qBAAA6C,WAAA8M,GAGAE,GACA/P,EAAAE,qBAAA4E,eAAA1D,GAEA,SAAA4O,EAAAC,GACAA,EAAAC,QAAA,SAAA9R,GACAA,EAAA+R,WAAAD,QAAA,SAAAzQ,GACAA,aAAAgN,aAEAiD,EAAAU,SAAA3Q,KAEA,cAAArB,EAAAiS,MAAAjS,EAAAwN,kBAAAa,cACArO,EAAAwN,OAAAjJ,QAAA+J,aACAiD,EAAA9C,WAAAzO,EAAAwN,QAGA+D,EAAAtC,cAAAjP,EAAAwN,WAmBA9N,EAAA0C,YAbA,SAAAgC,GACAkN,EAAAU,SAAA5N,GACAwJ,SAAAC,iBAAA,UAAA2D,IACAH,EAAA,IAAAa,iBAAAN,IACAA,QAAAxN,GACA+N,WAAA,EACAC,SAAA,EACAC,YAAA,EACAC,iBAAA,wBAEArQ,EAAAC,sBAAAyL,QACA3J,QAAAuO,MAAA,kCAUA7S,EAAA8S,WAPA,SAAApO,GACAkN,EAAAmB,WAAArO,GACAwJ,SAAAG,oBAAA,UAAAyD,GACAH,EAAAqB,aACAzQ,EAAAC,sBAAA4L,OACA9J,QAAAuO,MAAA,4DC7DAjS,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAAA0Q,EAAoB/R,EAAQ,GAC5BmT,EAA4BnT,EAAQ,GAqBpCE,EAAAsS,SApBA,SAAA5N,GACAA,EAAAG,QAAA+J,cACAiD,EAAA9C,WAAArK,GAEAA,EAAAG,QAAAqO,mBACAD,EAAAE,uBAAAzO,GAEA,IAAA0O,EAAA1O,EAAA2O,iBAAA,qDACAC,MAAAC,KAAAH,GAAAhB,QAAA,SAAA9O,GACAA,aAAAqL,aAEAkD,EAAA9C,WAAAzL,KAEA8P,EAAA1O,EAAA2O,iBAAA,iEACAC,MAAAC,KAAAH,GAAAhB,QAAA,SAAA9O,GACAA,aAAAqL,aAEAsE,EAAAE,uBAAA7P,MAwBAtD,EAAA+S,WApBA,SAAArO,GACAA,EAAAG,QAAA+J,cACAiD,EAAAtC,cAAA7K,GAEAA,EAAAG,QAAAqO,mBACAD,EAAAO,yBAAA9O,GAEA,IAAA0O,EAAA1O,EAAA2O,iBAAA,qDACAC,MAAAC,KAAAH,GAAAhB,QAAA,SAAA9O,GACAA,aAAAqL,aAEAkD,EAAAtC,cAAAjM,KAEA8P,EAAA1O,EAAA2O,iBAAA,iEACAC,MAAAC,KAAAH,GAAAhB,QAAA,SAAA9O,GACAA,aAAAqL,aAEAsE,EAAAO,yBAAAlQ,oCCxCA,SAAAmQ,EAAAnQ,GACAA,EAAAwK,OAAAC,QAFAnN,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAU9CnB,EAAAmT,uBANA,SAAAzO,QACAgP,GAAAhP,EAAAiP,aAAA,cACAjP,EAAAkP,SAAA,GAEAlP,EAAAyJ,iBAAA,aAAAsF,IAMAzT,EAAAwT,yBAHA,SAAA9O,GACAA,EAAA2J,oBAAA,aAAAoF,kCCZA7S,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IA6B9CnB,EAAA4C,eAfA,SAAAA,EAAAuO,EAAAzM,GACA,IACAmP,EAfA,SAAAC,EAAApP,GACA,IAAAmP,EAAAnP,EAAAE,cACA,OAAAiP,EACAA,EAAAhP,QAAAC,kBACA+O,EAEAC,EAAAD,GAEA,KAOAC,CADApP,GAAAwJ,SAAAgD,eAEA,GAAA2C,EAAA,CAIA,IAAAhN,EAAAgN,EAAA7F,cAAA,oBAAAmD,EAAA,KACAtK,EACAA,EAAAkH,QAGAnL,EAAAuO,EAAA0C,QARAvP,QAAAiC,MAAA,4CAAA4K","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"./action-context/action-context\");\nexports.Action = action_context_1.Action;\nexports.ActionContextService = action_context_1.ActionContextService;\nvar hotkey_1 = require(\"./hotkey/hotkey\");\nexports.Hotkey = hotkey_1.Hotkey;\nvar constrain_focus_1 = require(\"./constrain-focus/constrain-focus\");\nexports.ConstrainFocusService = constrain_focus_1.ConstrainFocusService;\nvar start_phocus_1 = require(\"./dom-manipulation/start-phocus\");\nexports.startPhocus = start_phocus_1.startPhocus;\nvar focus_in_context_1 = require(\"./dom-manipulation/focus-in-context\");\nexports.focusInContext = focus_in_context_1.focusInContext;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar hotkey_1 = require(\"../hotkey/hotkey\");\n// Actions have one free argument; when a context is pushed onto the stack, that\n// argument is stored along with it. An ActionInContext closes over the argument\n// so that the action can be called anywhere\nvar ActionInContext = /** @class */ (function () {\n    function ActionInContext(action, contextName, argument, element, service) {\n        this.action = action;\n        this.contextName = contextName;\n        this.argument = argument;\n        this.element = element;\n        this.service = service;\n    }\n    Object.defineProperty(ActionInContext.prototype, \"hasArgument\", {\n        get: function () {\n            return !!this.argument;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionInContext.prototype.act = function (e) {\n        return this.action.actOn(this.argument, this.element, e);\n    };\n    ActionInContext.prototype.context = function () {\n        this.service.contexts[this.contextName];\n    };\n    return ActionInContext;\n}());\nexports.ActionInContext = ActionInContext;\n// An action is anything you can do in a given context. It can be mapped to a\n// keyboard shortcut.\nvar Action = /** @class */ (function () {\n    function Action(description) {\n        this.remappedKey = null;\n        this.remappedKey = null;\n        this.name = description.name;\n        this.shortDocumentation = description.shortDocumentation;\n        this.searchTerms = description.searchTerms;\n        this.actOn = description.actOn;\n        this.defaultKeys = description.defaultKeys;\n        this.hidden = description.hidden || false;\n    }\n    Object.defineProperty(Action.prototype, \"keys\", {\n        get: function () {\n            if (this.remappedKey)\n                return [this.remappedKey];\n            return this.defaultKeys;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Action.prototype.label = function () {\n        var key = this.keys[0];\n        if (key) {\n            return this.name + \" (\" + key + \")\";\n        }\n        else {\n            return this.name;\n        }\n    };\n    return Action;\n}());\nexports.Action = Action;\nvar ActionContextServiceClass = /** @class */ (function () {\n    function ActionContextServiceClass() {\n        this.contexts = {};\n        this.remappingDirty = false;\n        this.contextStack = [];\n    }\n    ActionContextServiceClass.prototype.addContext = function (name, context) {\n        if (this.contexts[name]) {\n            console.warn(\"Replacing existing context blueprint: \", name);\n        }\n        this.contexts[name] = context;\n    };\n    ActionContextServiceClass.prototype.clear = function () {\n        this.contextStack = [];\n    };\n    ActionContextServiceClass.prototype.getContextStack = function (elt) {\n        if (!elt)\n            return [];\n        var stack = this.getContextStack(elt.parentElement);\n        if (elt.dataset.phocusContextName) {\n            stack.unshift({\n                context: elt.dataset.phocusContextName,\n                argument: elt.dataset.phocusContextArgument,\n                element: elt\n            });\n        }\n        return stack;\n    };\n    ActionContextServiceClass.prototype.setContext = function (elt) {\n        this.contextStack = this.getContextStack(elt);\n    };\n    /** Give a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.remapAction = function (action, newMapping) {\n        action.remappedKey = newMapping;\n    };\n    /** Remove a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.unremapAction = function (action) {\n        action.remappedKey = null;\n    };\n    /** Remove a user-specific key command for an action. */\n    ActionContextServiceClass.prototype.unmapAction = function (action) {\n        action.remappedKey = \"None\";\n    };\n    Object.defineProperty(ActionContextServiceClass.prototype, \"currentRemapping\", {\n        /** Collect all user-remapped actions so that they can be saved */\n        get: function () {\n            var _this = this;\n            var ll = Object.keys(this.contexts).map(function (contextName) {\n                var context = _this.contexts[contextName];\n                if (!context)\n                    return; // TODO assertion, probs\n                return Object.keys(context.actions).map(function (actionName) {\n                    var action = context.actions[actionName];\n                    if (!action.remappedKey)\n                        return;\n                    return {\n                        action: actionName,\n                        context: contextName,\n                        mapping: action.remappedKey\n                    };\n                });\n            });\n            return [].concat.apply([], ll).filter(function (x) { return x; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionContextServiceClass.prototype.restoreRemapping = function (remapping) {\n        var _this = this;\n        if (!remapping)\n            return;\n        remapping.map(function (m) {\n            var context = _this.contexts[m.context];\n            var action = context.actions[m.action];\n            _this.remapAction(action, m.mapping);\n        });\n    };\n    Object.defineProperty(ActionContextServiceClass.prototype, \"availableActions\", {\n        /** Collect actions, along with the appropriate argument, from all\n         * contexts in the active stack, smallest context first */\n        get: function () {\n            return this.actionsInContexts(this.contextStack);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionContextServiceClass.prototype.actionsInContexts = function (contextStack) {\n        var accum = [];\n        for (var i = 0; i < contextStack.length; i++) {\n            var contextEntry = contextStack[i];\n            var context = this.contextFor(contextEntry);\n            if (!context) {\n                console.error(\"Unknown action context:\", contextEntry.context);\n                return;\n            }\n            var actions = this.actionsFromContext(contextEntry);\n            accum = accum.concat(actions);\n            if (context.opaque) {\n                break;\n            }\n        }\n        return accum;\n    };\n    ActionContextServiceClass.prototype.actionsFromContext = function (contextEntry) {\n        var _this = this;\n        var context = this.contextFor(contextEntry);\n        var actionsByName = context.actions;\n        return Object.keys(actionsByName).map(function (name) {\n            return new ActionInContext(actionsByName[name], contextEntry.context, contextEntry.argument, contextEntry.element, _this);\n        });\n    };\n    ActionContextServiceClass.prototype.contextFor = function (contextEntry) {\n        return this.contexts[contextEntry.context];\n    };\n    ActionContextServiceClass.prototype.actionForKeypress = function (key) {\n        var availableActions = this.availableActions;\n        if (!availableActions)\n            return;\n        return availableActions.find(function (actionInContext) {\n            var action = actionInContext.action;\n            return action.keys.indexOf(key) >= 0;\n        });\n    };\n    ActionContextServiceClass.prototype.handleKeypress = function (event) {\n        var key = hotkey_1.Hotkey.canonicalKeyFromEvent(event);\n        var keyAction = this.actionForKeypress(key);\n        if (keyAction) {\n            event.preventDefault();\n            event.stopPropagation();\n            keyAction.act(event);\n        }\n    };\n    ActionContextServiceClass.prototype.actionForName = function (name) {\n        var _this = this;\n        var contextEntry = this.contextStack.find(function (c) {\n            var context = _this.contextFor(c);\n            return context && name in context.actions;\n        });\n        if (!contextEntry)\n            return;\n        var context = this.contextFor(contextEntry);\n        return new ActionInContext(context.actions[name], contextEntry.context, contextEntry.argument, contextEntry.element, this);\n    };\n    ActionContextServiceClass.prototype.triggerAction = function (name, e) {\n        var action = this.actionForName(name);\n        if (!action) {\n            console.error(\"No action found for name \" + name + \".\", this.contextStack);\n            return;\n        }\n        action.act(e);\n    };\n    return ActionContextServiceClass;\n}());\nexports.ActionContextServiceClass = ActionContextServiceClass;\nexports.ActionContextService = new ActionContextServiceClass();\n//# sourceMappingURL=action-context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keys = {\n    3: [\"Cancel\", \"Cancel\"],\n    6: [\"Help\", \"Help\"],\n    8: [\"Backspace\", \"Backspace\"],\n    9: [\"Tab\", \"Tab\"],\n    12: [\"Clear\", \"Clear\"],\n    13: [\"Enter\", \"Enter\"],\n    16: [\"Shift\", \"Shift\"],\n    17: [\"Control\", \"Control\"],\n    18: [\"Alt\", \"Alt\"],\n    19: [\"Pause\", \"Pause\"],\n    20: [\"CapsLock\", \"CapsLock\"],\n    27: [\"Escape\", \"Escape\"],\n    28: [\"Convert\", \"Convert\"],\n    29: [\"NonConvert\", \"NonConvert\"],\n    30: [\"Accept\", \"Accept\"],\n    31: [\"ModeChange\", \"ModeChange\"],\n    32: [\" \", \" \"],\n    33: [\"PageUp\", \"PageUp\"],\n    34: [\"PageDown\", \"PageDown\"],\n    35: [\"End\", \"End\"],\n    36: [\"Home\", \"Home\"],\n    37: [\"ArrowLeft\", \"ArrowLeft\"],\n    38: [\"ArrowUp\", \"ArrowUp\"],\n    39: [\"ArrowRight\", \"ArrowRight\"],\n    40: [\"ArrowDown\", \"ArrowDown\"],\n    41: [\"Select\", \"Select\"],\n    42: [\"Print\", \"Print\"],\n    43: [\"Execute\", \"Execute\"],\n    44: [\"PrintScreen\", \"PrintScreen\"],\n    45: [\"Insert\", \"Insert\"],\n    46: [\"Delete\", \"Delete\"],\n    48: [\"0\", \")\"],\n    49: [\"1\", \"!\"],\n    50: [\"2\", \"@\"],\n    51: [\"3\", \"#\"],\n    52: [\"4\", \"$\"],\n    53: [\"5\", \"%\"],\n    54: [\"6\", \"^\"],\n    55: [\"7\", \"&\"],\n    56: [\"8\", \"*\"],\n    57: [\"9\", \"(\"],\n    91: [\"OS\", \"OS\"],\n    93: [\"ContextMenu\", \"ContextMenu\"],\n    144: [\"NumLock\", \"NumLock\"],\n    145: [\"ScrollLock\", \"ScrollLock\"],\n    181: [\"VolumeMute\", \"VolumeMute\"],\n    182: [\"VolumeDown\", \"VolumeDown\"],\n    183: [\"VolumeUp\", \"VolumeUp\"],\n    186: [\";\", \":\"],\n    187: [\"=\", \"+\"],\n    188: [\",\", \"<\"],\n    189: [\"-\", \"_\"],\n    190: [\".\", \">\"],\n    191: [\"/\", \"?\"],\n    192: [\"`\", \"~\"],\n    219: [\"[\", \"{\"],\n    220: [\"\\\\\", \"|\"],\n    221: [\"]\", \"}\"],\n    222: [\"'\", '\"'],\n    224: [\"Meta\", \"Meta\"],\n    225: [\"AltGraph\", \"AltGraph\"],\n    246: [\"Attn\", \"Attn\"],\n    247: [\"CrSel\", \"CrSel\"],\n    248: [\"ExSel\", \"ExSel\"],\n    249: [\"EraseEof\", \"EraseEof\"],\n    250: [\"Play\", \"Play\"],\n    251: [\"ZoomOut\", \"ZoomOut\"]\n};\nvar letter = \"\";\nfor (var i = 65; i < 91; i++) {\n    letter = String.fromCharCode(i);\n    keys[i] = [letter.toLowerCase(), letter.toUpperCase()];\n}\nvar HotkeyClass = /** @class */ (function () {\n    function HotkeyClass() {\n        // TODO change map for mac/PC\n        this.displayMap = {\n            Alt: \"Alt+\",\n            Meta: \"\\u2318+\",\n            OS: \"\\u229E+\",\n            Shift: \"\\u21E7\",\n            Control: \"Ctrl+\"\n        };\n        this.modifiers = [\"Control\", \"Alt\", \"Shift\", \"Meta\", \"OS\"];\n        this.isMacLike = !!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);\n    }\n    HotkeyClass.prototype.keyName = function (key) {\n        var keyString = {\n            \" \": \"Space\"\n        }[key];\n        return keyString || key;\n    };\n    HotkeyClass.prototype.modifierKeyNameForPlatform = function (key) {\n        return this.displayMap[key];\n    };\n    HotkeyClass.prototype.displayKey = function (canonicalKey) {\n        var _this = this;\n        var parts = canonicalKey.split(\"+\");\n        var key = parts.pop();\n        var modifiers = parts.map(function (key) {\n            return _this.modifierKeyNameForPlatform(key);\n        });\n        return modifiers.join(\"\") + key;\n    };\n    HotkeyClass.prototype.canonicalKeyFromEvent = function (e) {\n        var key = keys[e.keyCode][e.getModifierState(\"Shift\") ? 1 : 0];\n        if (this.modifiers.indexOf(key) >= 0) {\n            return \"\";\n        }\n        var modifiers = this.modifiers.map(function (key) {\n            return e.getModifierState(key) ? key + \"+\" : \"\";\n        });\n        return modifiers.join(\"\") + this.keyName(key);\n    };\n    return HotkeyClass;\n}());\nexports.HotkeyClass = HotkeyClass;\nexports.Hotkey = new HotkeyClass();\n//# sourceMappingURL=hotkey.js.map","\"use strict\";\n// From 'The Rule of Phocus':\n// 4. Some states only allow focus among a subset of all focusable elements (modals, menus)\n//     4.1. This subset is always contained in exactly one branch of the element tree\n//\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ConstrainFocus = /** @class */ (function () {\n    function ConstrainFocus() {\n        var _this = this;\n        this.stack = [];\n        this.handler = function (e) {\n            if (_this.noConstraints())\n                return;\n            var root = _this.currentRoot();\n            if (!root)\n                return;\n            if (!e.relatedTarget)\n                return;\n            if (!root.contains(e.relatedTarget)) {\n                if (root.contains(e.target)) {\n                    e.target.focus();\n                }\n                else {\n                    root.querySelector(\"[tabindex='0']\").focus();\n                }\n            }\n        };\n    }\n    ConstrainFocus.prototype.start = function () {\n        document.addEventListener(\"blur\", this.handler, true);\n    };\n    ConstrainFocus.prototype.stop = function () {\n        document.removeEventListener(\"blur\", this.handler, true);\n    };\n    ConstrainFocus.prototype.focusable = function (element) {\n        var root = this.currentRoot();\n        return this.noConstraints() || (root && root.contains(element));\n    };\n    ConstrainFocus.prototype.currentRoot = function () {\n        return this.stack[0] && this.stack[0]();\n    };\n    ConstrainFocus.prototype.pushConstraint = function (root) {\n        this.stack.unshift(root);\n    };\n    ConstrainFocus.prototype.popConstraint = function () {\n        this.stack.shift();\n    };\n    ConstrainFocus.prototype.noConstraints = function () {\n        return this.stack.length == 0;\n    };\n    return ConstrainFocus;\n}());\nexports.ConstrainFocus = ConstrainFocus;\nexports.ConstrainFocusService = new ConstrainFocus();\n//# sourceMappingURL=constrain-focus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"../action-context/action-context\");\nfunction onClick(e) {\n    if (!(e.target instanceof HTMLElement))\n        return;\n    if (!e.target.dataset.phocusAction)\n        return;\n    if (e.target.disabled)\n        return;\n    action_context_1.ActionContextService.setContext(e.target);\n    action_context_1.ActionContextService.triggerAction(e.target.dataset.phocusAction);\n}\nexports.triggerableTags = [\"button\", \"a\"];\nfunction addTrigger(elt) {\n    if (!elt.dataset.phocusAction)\n        return;\n    var action = elt.dataset.phocusAction;\n    if (exports.triggerableTags.indexOf(elt.tagName.toLowerCase()) < 0) {\n        console.error(elt.tagName + \" (assigned to trigger \" + action + \") is not an accessible tag. Use a <button> or an <a>.\");\n        console.info(\"Setting role to 'button' to compensate.\");\n        elt.setAttribute(\"role\", \"button\");\n    }\n    var oldContext = action_context_1.ActionContextService.contextStack; // this store and restore thing; do it with an internal stack stack?\n    try {\n        // Add button labels, including any keyboard shortcuts\n        action_context_1.ActionContextService.setContext(elt);\n        var actionInContext = action_context_1.ActionContextService.actionForName(action);\n        if (!actionInContext) {\n            console.error(\"No action found for name \" + action, action_context_1.ActionContextService.contextStack);\n            return;\n        }\n        elt.title = actionInContext.action.label();\n        elt.setAttribute(\"aria-label\", actionInContext.action.label());\n        // Set text (if elt is empty)\n        if (/^\\s*$/.test(elt.innerHTML)) {\n            elt.innerHTML = actionInContext.action.name;\n        }\n        // Add click handler\n        elt.addEventListener(\"click\", onClick);\n    }\n    finally {\n        // Restore context previously in progress\n        action_context_1.ActionContextService.contextStack = oldContext;\n    }\n}\nexports.addTrigger = addTrigger;\nfunction removeTrigger(elt) {\n    elt.removeEventListener(\"click\", onClick);\n}\nexports.removeTrigger = removeTrigger;\n//# sourceMappingURL=add-trigger.js.map","import {\n  Action,\n  ActionContextService,\n  startPhocus,\n  focusInContext\n} from \"phocus\";\n\n/*\nYou should use a frontend framework! This tiny todo app uses Phocus all by\nitself so that you can see what Phocus can do; but you should NOT use Phocus by\nitself. Use it with React or Angular or something, OK?\n\nI'm logging to the console instead of interacting with a real API, but the\nprinciple's the same -- you've got the relevant id, so you can make the relevant\nrequest.\n\n*/\n\nvar todoList = {};\n\n// First, we'll set up some contexts. One for the whole list, one for the form,\n// and one that represents an individual todo item.\n\nActionContextService.addContext(\"todo-list\", {\n  actions: {\n    add: new Action({\n      name: \"Add Todo\",\n      defaultKeys: [\"Control+n\"],\n      actOn: (_, elt) => {\n        focusInContext(\"new-item-form\", elt);\n      }\n    })\n  }\n});\n\nActionContextService.addContext(\"todo-item-form\", {\n  actions: {\n    add: new Action({\n      name: \"Add Todo\",\n      defaultKeys: [\"Enter\"],\n      actOn: (_, elt) => {\n        // Get a new event \"from the API\"\n        const input = document.getElementById(\"new-item-form\");\n        makeTodoItem(input.value);\n        renderList();\n        input.value = \"\";\n        input.focus();\n      }\n    })\n  }\n});\n\nActionContextService.addContext(\"todo-item\", {\n  actions: {\n    start: new Action({\n      name: \"Start\",\n      defaultKeys: [\"s\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a start event to the API, if you had an API\n        console.log(`API: Start item ${id}`);\n        todoList[id].status = \"started\";\n        renderList(id);\n      }\n    }),\n    finish: new Action({\n      name: \"Finish\",\n      defaultKeys: [\"f\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a finish event to the API, if you had an API\n        console.log(`API: Finish item ${id}`);\n        todoList[id].status = \"finished\";\n        renderList(id);\n      }\n    }),\n    delete: new Action({\n      name: \"Delete\",\n      defaultKeys: [\"Backspace\"],\n      actOn: (id, elt) => {\n        // Here's where you'd send a delete event to the API, if you had an API\n        console.log(`Delete item ${id}`);\n\n        // Update focus\n        const prev = getPreviousItem(id);\n        const next = getNextItem(id);\n        if (prev) {\n          focusInContext(`todo-item-${prev.id}`, elt);\n        } else if (next) {\n          focusInContext(`todo-item-${next.id}`, elt);\n        } else {\n          focusInContext(\"new-item-form\", elt);\n        }\n\n        // Update UI\n        delete todoList[id];\n        renderList();\n      }\n    }),\n    next: new Action({\n      name: \"Next\",\n      defaultKeys: [\"ArrowDown\", \"j\"],\n      actOn: (id, elt) => {\n        const next = getNextItem(id);\n        if (next) focusInContext(`todo-item-${next.id}`, elt);\n      }\n    }),\n    previous: new Action({\n      name: \"previous\",\n      defaultKeys: [\"ArrowUp\", \"k\"],\n      actOn: (id, elt) => {\n        const prev = getPreviousItem(id);\n        if (prev) focusInContext(`todo-item-${prev.id}`, elt);\n      }\n    })\n  }\n});\n\nwindow.addEventListener(\"load\", () => {\n  renderList();\n  startPhocus(document.body);\n  document.querySelector(\"li\").focus();\n});\n\n// MODEL\n// In a real app this'd be connected to an API, and there'd be\n// multiple lists and all kinds of good stuff; this is not the best app in the\n// world; this is only a tribu^H^H^H^H^H demo.\n\nvar maxId = 1;\nfunction makeTodoItem(name) {\n  maxId++;\n  const it = {\n    id: maxId.toString(),\n    name: name,\n    status: \"todo\"\n  };\n  todoList[maxId.toString()] = it;\n  return it;\n}\n\nmakeTodoItem(\"Make trouble\");\nmakeTodoItem(\"Walk the lobster\");\nmakeTodoItem(\"Sing the body electric\");\n\n// RENDERING\n// You should use a frontend framework for this sort of thing, I'm simplifying\n// so you can see what Phocus is doing without the complexity of a framework.\n\nfunction renderList(fid) {\n  const oldFocus = document.activeElement.dataset.phocusId;\n  const list = document.getElementById(\"list\");\n  list.innerHTML = Object.keys(todoList)\n    .sort()\n    .map(id => renderItem(todoList[id]))\n    .join(\"\");\n\n  if (oldFocus) {\n    focusInContext(oldFocus, list);\n  } else if (fid) {\n    focusInContext(`todo-item-${fid}`, list);\n  } else {\n    ActionContextService.setContext(list);\n  }\n}\n\nfunction getNextItem(id) {\n  const ids = Object.keys(todoList).sort();\n  const current = ids.findIndex(i => i === id);\n  if (ids.length > current + 1) return todoList[ids[current + 1]];\n}\n\nfunction getPreviousItem(id) {\n  const ids = Object.keys(todoList).sort();\n  const current = ids.findIndex(i => i === id);\n  if (current > 0) return todoList[ids[current - 1]];\n}\n\nfunction renderItem(item) {\n  return `<li\n    tabindex=\"0\"\n    data-phocus-id=\"todo-item-${item.id}\"\n    data-phocus-context-name=\"todo-item\"\n    data-phocus-context-argument=\"${item.id}\"\n    data-phocus-on-mouseover=\"true\"\n    class=\"${item.status}\">\n      ${item.name}\n      <div class=\"buttons\">\n        <button data-phocus-action=\"start\"></button>\n        <button data-phocus-action=\"finish\"></button>\n        <button data-phocus-action=\"delete\">&times;</button>\n      </div>\n    </li>`;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar action_context_1 = require(\"../action-context/action-context\");\nvar dispatch_1 = require(\"./dispatch\");\nvar add_trigger_1 = require(\"./add-trigger\");\nvar constrain_focus_1 = require(\"../constrain-focus/constrain-focus\");\nfunction setFocusedContext() {\n    var focused = document.activeElement;\n    var focusedElement;\n    if (!(focused instanceof HTMLElement) && focused.parentElement) {\n        focusedElement = focused.parentElement;\n    }\n    else {\n        focusedElement = focused;\n    }\n    if (!focusedElement)\n        return;\n    if (focusedElement == document.body)\n        return;\n    action_context_1.ActionContextService.setContext(focusedElement);\n}\nfunction keydown(e) {\n    setFocusedContext();\n    action_context_1.ActionContextService.handleKeypress(e);\n}\nfunction observe(mutations) {\n    mutations.forEach(function (m) {\n        m.addedNodes.forEach(function (n) {\n            if (!(n instanceof HTMLElement))\n                return;\n            dispatch_1.dispatch(n);\n        });\n        if (m.type == \"attributes\" && m.target instanceof HTMLElement) {\n            if (m.target.dataset.phocusAction) {\n                add_trigger_1.addTrigger(m.target);\n            }\n            else {\n                add_trigger_1.removeTrigger(m.target);\n            }\n        }\n    });\n}\nvar observer;\nfunction startPhocus(elt) {\n    dispatch_1.dispatch(elt);\n    document.addEventListener(\"keydown\", keydown);\n    observer = new MutationObserver(observe);\n    observer.observe(elt, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"data-phocus-action\"]\n    });\n    constrain_focus_1.ConstrainFocusService.start();\n    console.debug(\"Phocus: Watching for changes.\");\n}\nexports.startPhocus = startPhocus;\nfunction stopPhocus(elt) {\n    dispatch_1.undispatch(elt);\n    document.removeEventListener(\"keydown\", keydown);\n    observer.disconnect();\n    constrain_focus_1.ConstrainFocusService.stop();\n    console.debug(\"Phocus: Watching stopped.\");\n}\nexports.stopPhocus = stopPhocus;\n//# sourceMappingURL=start-phocus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar add_trigger_1 = require(\"./add-trigger\");\nvar mouseover_focusable_1 = require(\"./mouseover-focusable\");\nfunction dispatch(elt) {\n    if (elt.dataset.phocusAction) {\n        add_trigger_1.addTrigger(elt);\n    }\n    if (elt.dataset.phocusOnMouseover) {\n        mouseover_focusable_1.makeMouseoverFocusable(elt);\n    }\n    var children = elt.querySelectorAll(\"[data-phocus-action]:not([data-phocus-action=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        add_trigger_1.addTrigger(e);\n    });\n    children = elt.querySelectorAll(\"[data-phocus-on-mouseover]:not([data-phocus-on-mouseover=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        mouseover_focusable_1.makeMouseoverFocusable(e);\n    });\n}\nexports.dispatch = dispatch;\nfunction undispatch(elt) {\n    if (elt.dataset.phocusAction) {\n        add_trigger_1.removeTrigger(elt);\n    }\n    if (elt.dataset.phocusOnMouseover) {\n        mouseover_focusable_1.removeMouseoverFocusable(elt);\n    }\n    var children = elt.querySelectorAll(\"[data-phocus-action]:not([data-phocus-action=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        add_trigger_1.removeTrigger(e);\n    });\n    children = elt.querySelectorAll(\"[data-phocus-on-mouseover]:not([data-phocus-on-mouseover=''])\");\n    Array.from(children).forEach(function (e) {\n        if (!(e instanceof HTMLElement))\n            return;\n        mouseover_focusable_1.removeMouseoverFocusable(e);\n    });\n}\nexports.undispatch = undispatch;\n//# sourceMappingURL=dispatch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction mouseoverFocus(e) {\n    e.target.focus();\n}\nfunction makeMouseoverFocusable(elt) {\n    if (elt.getAttribute(\"tabindex\") == undefined) {\n        elt.tabIndex = 0;\n    }\n    elt.addEventListener(\"mouseenter\", mouseoverFocus);\n}\nexports.makeMouseoverFocusable = makeMouseoverFocusable;\nfunction removeMouseoverFocusable(elt) {\n    elt.removeEventListener(\"mouseenter\", mouseoverFocus);\n}\nexports.removeMouseoverFocusable = removeMouseoverFocusable;\n//# sourceMappingURL=mouseover-focusable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getContextParent(elt) {\n    var parent = elt.parentElement;\n    if (parent) {\n        if (parent.dataset.phocusContextName) {\n            return parent;\n        }\n        return getContextParent(parent);\n    }\n    return null;\n}\n// Allows elements with the same phocus-id to appear on the page, but asking to\n// focus on one will always result in focusing on the one in the nearest\n// ancestor context.\nfunction focusInContext(phocusId, elt) {\n    var current = elt || document.activeElement;\n    var parent = getContextParent(current);\n    if (!parent) {\n        console.error(\"No element found to focus with phocus-id \" + phocusId);\n        return;\n    }\n    var find = parent.querySelector(\"[data-phocus-id=\\\"\" + phocusId + \"\\\"\");\n    if (find) {\n        find.focus();\n    }\n    else {\n        focusInContext(phocusId, parent);\n    }\n}\nexports.focusInContext = focusInContext;\n//# sourceMappingURL=focus-in-context.js.map"],"sourceRoot":""}